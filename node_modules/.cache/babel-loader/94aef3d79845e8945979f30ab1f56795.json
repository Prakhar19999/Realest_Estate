{"ast":null,"code":"import _regeneratorRuntime from\"/home/dell/Desktop/Internship Task/realest_estate/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dell/Desktop/Internship Task/realest_estate/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dell/Desktop/Internship Task/realest_estate/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Helmet}from'react-helmet';import axios from'axios';import Card from'../components/Card';import Pagination from'../components/Pagination';var Listings=function Listings(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listings=_useState2[0],setListings=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),previous=_useState6[0],setPrevious=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),next=_useState8[0],setNext=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),active=_useState10[0],setActive=_useState10[1];useEffect(function(){window.scrollTo(0,0);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/listings/?page=1\"));case 3:res=_context.sent;setListings(res.data.results);setCount(res.data.count);setPrevious(res.data.previous);setNext(res.data.next);_context.next=12;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var displayListings=function displayListings(){var display=[];var result=[];listings.map(function(listing){return display.push(/*#__PURE__*/React.createElement(Card,{title:listing.title,address:listing.address,city:listing.city,state:listing.state,price:listing.price,sale_type:listing.sale_type,home_type:listing.home_type,bedrooms:listing.bedrooms,bathrooms:listing.bathrooms,sqft:listing.sqft,photo_main:listing.photo_main,slug:listing.slug}));});for(var i=0;i<listings.length;i+=3){result.push(/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1-of-3\"},display[i]),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1-of-3\"},display[i+1]?display[i+1]:null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1-of-3\"},display[i+2]?display[i+2]:null)));}return result;};var visitPage=function visitPage(page){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/listings/?page=\").concat(page)).then(function(res){setListings(res.data.results);setPrevious(res.data.previous);setNext(res.data.next);setActive(page);}).catch(function(err){});};var previous_number=function previous_number(){axios.get(previous).then(function(res){setListings(res.data.results);setPrevious(res.data.previous);setNext(res.data.next);if(previous)setActive(active-1);}).catch(function(err){});};var next_number=function next_number(){axios.get(next).then(function(res){setListings(res.data.results);setPrevious(res.data.previous);setNext(res.data.next);if(next)setActive(active+1);}).catch(function(err){});};return/*#__PURE__*/React.createElement(\"main\",{className:\"listings\"},/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,\"Realest Estate - Listings\"),/*#__PURE__*/React.createElement(\"meta\",{name:\"description\",content:\"Listings page\"})),/*#__PURE__*/React.createElement(\"section\",{className:\"listings__listings\"},displayListings()),/*#__PURE__*/React.createElement(\"section\",{className:\"listings__pagination\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(Pagination,{itemsPerPage:3,count:count,visitPage:visitPage,previous:previous_number,next:next_number,active:active,setActive:setActive}))));};export default Listings;","map":{"version":3,"sources":["/home/dell/Desktop/Internship Task/realest_estate/src/containers/Listings.js"],"names":["React","useState","useEffect","Helmet","axios","Card","Pagination","Listings","listings","setListings","count","setCount","previous","setPrevious","next","setNext","active","setActive","window","scrollTo","fetchData","get","process","env","REACT_APP_API_URL","res","data","results","displayListings","display","result","map","listing","push","title","address","city","state","price","sale_type","home_type","bedrooms","bathrooms","sqft","photo_main","slug","i","length","visitPage","page","then","catch","err","previous_number","next_number"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport axios from 'axios';\nimport Card from '../components/Card';\nimport Pagination from '../components/Pagination';\n\nconst Listings = () => {\n    const [listings, setListings] = useState([]);\n    const [count, setCount] = useState(0);\n    const [previous, setPrevious] = useState('');\n    const [next, setNext] = useState('');\n    const [active, setActive] = useState(1);\n\n    useEffect(() => {\n        window.scrollTo(0, 0);\n\n        const fetchData = async () => {\n            try {\n                const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/listings/?page=1`);\n\n                setListings(res.data.results);\n                setCount(res.data.count);\n                setPrevious(res.data.previous);\n                setNext(res.data.next);\n            }\n            catch (err) {\n\n            }\n        }\n\n        fetchData();\n    }, []);\n\n    const displayListings = () => {\n        let display = [];\n        let result = [];\n\n        listings.map(listing => {\n            return display.push(\n                <Card\n                    title={listing.title}\n                    address={listing.address}\n                    city={listing.city}\n                    state={listing.state}\n                    price={listing.price}\n                    sale_type={listing.sale_type}\n                    home_type={listing.home_type}\n                    bedrooms={listing.bedrooms}\n                    bathrooms={listing.bathrooms}\n                    sqft={listing.sqft}\n                    photo_main={listing.photo_main}\n                    slug={listing.slug}\n                />\n            );\n        });\n\n        for (let i = 0; i < listings.length; i += 3) {\n            result.push(\n                <div key={i} className='row'>\n                    <div className='col-1-of-3'>\n                        {display[i]}\n                    </div>\n                    <div className='col-1-of-3'>\n                        {display[i+1] ? display[i+1] : null}\n                    </div>\n                    <div className='col-1-of-3'>\n                        {display[i+2] ? display[i+2] : null}\n                    </div>\n                </div>\n            );\n        }\n\n        return result;\n    };\n\n    const visitPage = (page) => {\n        axios.get(`${process.env.REACT_APP_API_URL}/api/listings/?page=${page}`)\n        .then(res => {\n            setListings(res.data.results);\n            setPrevious(res.data.previous);\n            setNext(res.data.next);\n            setActive(page);\n        })\n        .catch(err => {\n\n        });\n    };\n\n    const previous_number = () => {\n        axios.get(previous)\n        .then(res => {\n            setListings(res.data.results);\n            setPrevious(res.data.previous);\n            setNext(res.data.next);\n            if (previous)\n                setActive(active-1);\n        })\n        .catch(err => {\n\n        });\n    };\n\n    const next_number = () => {\n        axios.get(next)\n        .then(res => {\n            setListings(res.data.results);\n            setPrevious(res.data.previous);\n            setNext(res.data.next);\n            if (next)\n                setActive(active+1);\n        })\n        .catch(err => {\n\n        });\n    };\n\n    return (\n        <main className='listings'>\n            <Helmet>\n                <title>Realest Estate - Listings</title>\n                <meta\n                    name='description'\n                    content='Listings page'\n                />\n            </Helmet>\n            <section className='listings__listings'>\n                {displayListings()}\n            </section>\n            <section className='listings__pagination'>\n                <div className='row'>\n                    <Pagination\n                        itemsPerPage={3}\n                        count={count}\n                        visitPage={visitPage}\n                        previous={previous_number}\n                        next={next_number}\n                        active={active}\n                        setActive={setActive}\n                    />\n                </div>\n            </section>\n        </main>\n    );\n};\n\nexport default Listings;\n"]},"metadata":{},"sourceType":"module"}